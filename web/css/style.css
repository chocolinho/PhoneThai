@charset "UTF-8";

/* =========================================================
  0) RESET & GLOBAL
  ========================================================= */
html { text-rendering: optimizeLegibility; scroll-behavior: smooth; }
*,*::before,*::after { box-sizing: border-box; }
img { max-width: 100%; display: block; }
a { color: inherit; text-decoration: none; }
a:hover { color: var(--color-accent); }
:focus-visible { outline: 3px solid rgba(108,92,231,.6); outline-offset: 2px; }

body {
  font-family: var(--font-body);
  -webkit-font-smoothing: antialiased; -moz-osx-font-smoothing: grayscale;
  background: var(--color-bg); color: var(--color-text);
  font-size: 16px; line-height: 1.7;
}

/* =========================================================
  1) DESIGN TOKENS
  ========================================================= */
:root{
  --color-bg:#F6F7FB;
  --color-surface:#FFFFFF;
  --color-card:#FFFFFF;
  --color-white:#FFFFFF;
  --color-border:#E6E8F0;
  --color-text:#1F2937;
  --color-heading:#0F172A;
  --color-muted:#6B7280;

  /* Chủ đạo đỏ */
  --red:#d61b1f;
  --red-2:#c8181b;
  --red-3:#ef4444;

  /* Accent phụ */
  --color-accent:#6C5CE7;
  --color-accent-2:#A78BFA;
  --gradient-primary:linear-gradient(90deg,var(--color-accent),var(--color-accent-2));

  --font-heading:'Lora', serif;
  --font-body:'Inter', system-ui, -apple-system, sans-serif;
  --font-display:'Poppins', sans-serif;

  --space-1:.25rem; --space-2:.5rem; --space-3:.75rem;
  --space-4:1rem; --space-5:1.25rem; --space-6:1.5rem;
  --space-8:2rem; --space-10:2.5rem; --space-12:3rem; --space-16:4.5rem;

  --radius:16px;
  --shadow-sm:0 6px 18px rgba(108,92,231,.18);
  --shadow-md:0 12px 32px rgba(15,23,42,.10);
  --shadow-lg:0 16px 44px rgba(15,23,42,.14);

  --transition-fast:all .2s ease-in-out;
  --transition-normal:all .3s ease-in-out;

  /* Hồng nhạt phụ cho promo */
  --pink-50:#fff0f0; --pink-100:#ffe4e4; --pink-200:#ffd2d2;
}

/* =========================================================
  2) SECTION TITLES
  ========================================================= */
.section { padding: var(--space-16) 0; }
.section-title{
  font-family: var(--font-heading);
  font-size: clamp(1.8rem,2.2vw + 1rem,2.5rem);
  font-weight: 700; color: var(--color-heading);
  text-align: center; margin: 0 0 var(--space-12);
}

/* =========================================================
  3) BUTTONS & CHIPS
  ========================================================= */
.btn-primary-custom{
  background-image: var(--gradient-primary); color: #fff; font-weight: 800;
  padding: var(--space-3) var(--space-6); border: none; border-radius: 999px;
  transition: var(--transition-normal); box-shadow: var(--shadow-sm);
}
.btn-primary-custom:hover { transform: translateY(-3px); box-shadow: var(--shadow-md); color: #fff; }

.btn-ghost{
  background: var(--color-surface); color: var(--color-text);
  border: 2px solid var(--color-border); border-radius: 999px;
  padding: 10px 16px; font-weight: 800; transition: var(--transition-normal);
}
.btn-ghost:hover{
  border-color: var(--color-accent); color: var(--color-accent);
  transform: translateY(-2px); box-shadow: 0 8px 18px rgba(15,23,42,.06);
}

.avatar{
  width: 36px; height: 36px; border-radius: 50%;
  display: inline-flex; align-items: center; justify-content: center;
  background: var(--gradient-primary); color: #fff; font-weight: 800; box-shadow: var(--shadow-sm);
}

/* =========================================================
  4) HEADER / NAV (FINAL REFINED)
  ========================================================= */
.cps-header{
  position: sticky; top: 0; z-index: 1100;
  backdrop-filter: saturate(120%) blur(2px);
}
.cps-nav{
  position: relative;
  background: linear-gradient(180deg, var(--red) 0%, var(--red) 60%, var(--red-2) 100%);
  color: #fff; padding: 8px 0; overflow: visible;
  box-shadow: 0 6px 18px rgba(214,27,31,.18);
}
.cps-logo img { height: 26px; }
.cps-logo-text { font-size: 1.15rem; letter-spacing: .2px; text-shadow: 0 1px 0 rgba(0,0,0,.15); }

.cps-btn-rounded { border-radius: 999px; padding: .45rem .8rem; font-weight: 600; }
.cps-btn-rounded.btn-light { background: #fff; border: none; }
.cps-btn-rounded:focus-visible { outline: 3px solid rgba(255,255,255,.65); outline-offset: 2px; }

/* Search trên nền đỏ */
.cps-search {
  position: relative; 
  min-width: 160px; 
  
  /* === SỬA ĐỔI Ở ĐÂY === */
  
  /* 1. Ngừng co giãn, đặt độ rộng. 
     Bạn có thể đổi 400px thành 50% nếu muốn */
  flex: 0 0 400px; 
  
  /* 2. Tự động đẩy mình sang lề bên phải */
  margin-left: auto; 
}
.cps-search i{
  position: absolute; left: .75rem; top: 50%; transform: translateY(-50%);
  opacity: .9; color: #fff;
}
.cps-search .form-control{
  height: 38px; border-radius: 999px; padding-left: 2rem;
  border: 1px solid rgba(255,255,255,.35); background: rgba(255,255,255,.08);
  color: #fff; box-shadow: none;
}
.cps-search .form-control::placeholder { color: rgba(255,255,255,.85); }
.cps-search .form-control:focus{
  outline: 0; background: rgba(255,255,255,.14);
  border-color: rgba(255,255,255,.65);
  box-shadow: 0 0 0 2px rgba(255,255,255,.25);
}
.cps-search .btn{
  --btn-bg: rgba(255,255,255,.16);
  --btn-bg-hover: rgba(255,255,255,.26);
  background: var(--btn-bg);
  border: 1px solid rgba(255,255,255,.35);
  color: #fff; border-radius: 999px; height: 38px; padding: 0 .9rem;
  box-shadow: 0 4px 12px rgba(0,0,0,.12);
}
.cps-search .btn:hover{ background: var(--btn-bg-hover); border-color: rgba(255,255,255,.6); }

/* Avatar nhỏ */
.cps-avatar{
  width: 28px; height: 28px; display: inline-flex; align-items: center; justify-content: center;
  border-radius: 50%; background: #f1f5f9; color: #0f172a; font-weight: 800; font-size: .9rem;
  box-shadow: 0 1px 0 rgba(0,0,0,.06), inset 0 1px 0 rgba(255,255,255,.7);
}

/* =========================================================
  5) MEGA DROPDOWN (Danh mục) - ĐÃ SỬA LỖI (Cả lỗi "ws" và lỗi logic)
  ========================================================= */
.hover-root { 
  position: relative; /* Đổi từ static -> relative để panel con bám vào */
}
.hover-trigger { 
  cursor: pointer; 
}

/* Panel nội dung dropdown */
.hover-panel {
  position: absolute;
  top: 100%; /* Đặt ngay bên dưới nút trigger */
  left: 0;   /* Căn lề trái với nút trigger */
  
  /* --- Trạng thái ẩn (khi đóng) --- */
  visibility: hidden;
  opacity: 0;
  transform: translateY(6px); /* Hiệu ứng trượt nhẹ lên khi mở */
  pointer-events: none; /* Tối ưu: Không cho phép tương tác khi đang ẩn */

  /* --- Hiệu ứng chuyển động --- */
  transition: opacity .18s, transform .18s;

  /* --- Kiểu dáng của panel --- */
  width: auto;
  min-width: 320px;
  max-width: 560px;
  background: #fff;
  border: 1px solid var(--color-border);
  border-radius: 12px;
  box-shadow: 0 8px 20px rgba(15,23,42,.12);
  padding: 10px 12px;
  z-index: 1080; /* Đảm bảo nổi lên trên nội dung, nhưng dưới dropdown tài khoản */
}

/* --- Trạng thái hiển thị (khi mở) --- */
.hover-root.open .hover-panel {
  visibility: visible;
  opacity: 1;
  transform: translateY(0); /* Trượt về vị trí gốc */
  pointer-events: auto; /* Cho phép tương tác trở lại khi đã hiện */
}

/* --- Nội dung bên trong panel --- */
.hover-panel h6{
  font-size: .9rem; 
  font-weight: 700; 
  text-transform: uppercase;
  color: var(--red); 
  margin-bottom: .4rem;
}

.item-link{
  display: block; 
  padding: .3rem 0; 
  color: #374151; 
  border-radius: .25rem; 
  font-size: .9rem;
  transition: all .2s ease;
}

.item-link:hover { 
  color: var(--red); 
  background: #fff4f4; 
}

/* Đảm bảo dropdown TÀI KHOẢN luôn nổi lên trên dropdown DANH MỤC */
.dropdown-menu { 
  z-index: 1120; 
}

/* Badge giỏ hàng */
.badge.badge--cart{
  background: linear-gradient(135deg,#6C5CE7,#A78BFA); color: #fff;
  box-shadow: 0 4px 10px rgba(108,92,231,.35);
  border: 1px solid rgba(255,255,255,.8);
}

/* =========================================================
  6) CHIPBAR / BLOCK TITLE (HOME)
  ========================================================= */
.cps-home{ padding-bottom: var(--space-12); }
.cps-block-title{
  font-family: var(--font-display); font-weight: 800; letter-spacing: .6px;
  font-size: clamp(1.3rem, 1.6vw + .9rem, 1.75rem);
  color: var(--red); text-transform: uppercase;
}
.cps-chipbar{
  background: var(--color-surface); border: 1px solid var(--color-border);
  border-radius: 12px; padding: .75rem; margin-bottom: .75rem;
}
.chip-list{ display: flex; gap: .5rem; flex-wrap: wrap; align-items: center; }
.chip-list + .chip-list{ margin-top: .5rem; }
.chip{
  display: inline-flex; align-items: center; gap: .25rem;
  padding: .4rem .75rem; border: 1px solid var(--color-border); border-radius: 999px;
  background: #fff; color: #374151; font-weight: 600; font-size: .92rem; transition: var(--transition-fast);
}
.chip:hover{ border-color: var(--red); color: var(--red); }
.chip.active{ background: #fee2e2; border-color: var(--red-3); color: #b91c1c; }

/* =========================================================
  7) PRODUCT CARD
  ========================================================= */
.cps-card{
  position: relative; height: 100%;
  background: var(--color-card); border: 1px solid var(--color-border);
  border-radius: 12px; overflow: hidden;
  transition: transform .24s ease, box-shadow .24s ease, border-color .24s ease;
}
.cps-card:hover{ transform: translateY(-4px); box-shadow: var(--shadow-lg); border-color: rgba(214,27,31,.3); }

.cps-badge-discount{
  position: absolute; top: 10px; left: 10px; z-index: 2;
  background: var(--red-3); color: #fff; font-weight: 800; font-size: .85rem;
  padding: .28rem .5rem; border-radius: 8px; box-shadow: 0 6px 16px rgba(239,68,68,.35);
}

.cps-card-thumb{
  display: block; background: #fff; text-align: center; padding: 18px 14px 8px;
  border-bottom: 1px dashed var(--color-border);
}
.cps-card-thumb img{ height: 200px; width: auto; object-fit: contain; margin: 0 auto; }

.cps-card-body{ padding: 12px 14px 14px; display: flex; flex-direction: column; gap: .5rem; }
.cps-card-title{ font-family: var(--font-heading); font-weight: 800; font-size: 1rem; line-height: 1.4; }
.cps-card-title a{ color: var(--color-heading); }
.cps-card-title a:hover{ color: var(--red); }

.cps-price{ display: flex; align-items: center; gap: .5rem; }
.cps-price .price{ color: var(--red); font-weight: 800; font-size: 1.06rem; }
.cps-price .price-old{ color: #6b7280; text-decoration: line-through; font-size: .92rem; }

.cps-note{ margin: 0; font-size: .88rem; color: #6b7280; }

/* =========================================================
  8) BRANDS (optional)
  ========================================================= */
.brands-section{
  padding: 34px 0; border-top: 1px solid var(--color-border); border-bottom: 1px solid var(--color-border);
}
.brand-logo { text-align: center; }
.brand-logo img{
  max-height: 40px; width: auto; filter: grayscale(100%); opacity: .65;
  transition: filter .25s, opacity .25s, transform .25s;
}
.brand-logo img:hover{ filter: none; opacity: 1; transform: translateY(-2px); }

/* =========================================================
  9) PROMO (Hot Sale)
  ========================================================= */
.cps-promo{
  background: #fff; border: 1px solid var(--color-border);
  border-radius: 16px; box-shadow: var(--shadow-sm); overflow: hidden;
}

/* ribbon */
.promo-ribbon{
  position: relative; text-align: center; color: #fff;
  background: linear-gradient(180deg,#ff5a5a 0%,#ff3e3e 60%,#f43636 100%);
  padding: .7rem 1rem; font-family: var(--font-display); font-weight: 800;
  letter-spacing: .3px; line-height: 1; font-size: clamp(1.05rem,1vw + .9rem,1.35rem);
}
.promo-ribbon .icon-left,.promo-ribbon .icon-right{
  position: absolute; top: 50%; transform: translateY(-50%); font-size: 1.15rem; opacity: .95;
}
.promo-ribbon .icon-left{ left: .75rem; } .promo-ribbon .icon-right{ right: .75rem; }

/* tabs + countdown */
.promo-tabs{
  display: flex; gap: .5rem; align-items: center; flex-wrap: wrap;
  padding: .65rem .75rem;
  background: linear-gradient(90deg,#ffe7e7 0,#fff 45%,#eef2ff 100%);
  border-bottom: 1px solid var(--color-border);
}
.promo-tabs .tab{
  background: #fff; border: 1px solid var(--pink-200); color: #a31616;
  padding: .38rem .8rem; border-radius: 999px; font-weight: 700; font-size: .92rem; line-height: 1;
  transition: filter .2s ease, transform .2s ease;
}
.promo-tabs .tab:hover{ filter: brightness(.98); transform: translateY(-1px); }
.promo-tabs .tab.active{ background: #ffefef; border-color: #ff9aa2; color: #8e1111; }
.promo-countdown{
  display: flex; align-items: center; gap: .5rem; margin-left: auto;
  font-weight: 800; color: #ff2d2d; white-space: nowrap;
}
.promo-countdown #promoCountdown{
  background: #fff; border: 1px solid var(--pink-200);
  padding: .28rem .55rem; border-radius: 8px; min-width: 140px; text-align: center;
  font-variant-numeric: tabular-nums; letter-spacing: .5px;
}

/* carousel */
.promo-carousel{ position: relative; padding: .75rem; }
.promo-carousel .nav{
  position: absolute; top: 50%; transform: translateY(-50%);
  width: 36px; height: 36px; border: none; border-radius: 50%;
  background: #fff; color: #111; box-shadow: 0 6px 18px rgba(0,0,0,.15);
  display: flex; align-items: center; justify-content: center; z-index: 2;
}
.promo-carousel .prev{ left: 8px; } .promo-carousel .next{ right: 8px; }
.promo-carousel .nav:hover{ filter: brightness(.98); }
@media (max-width:575.98px){ .promo-carousel .nav{ display: none; } }

.promo-track{
  display: grid; grid-auto-flow: column; grid-auto-columns: minmax(240px,1fr);
  gap: .75rem; overflow-x: auto; scroll-snap-type: x mandatory;
  padding: .25rem .25rem .6rem; scrollbar-width: thin; -webkit-overflow-scrolling: touch;
}
.promo-track::-webkit-scrollbar{ height: 8px; }
.promo-track::-webkit-scrollbar-thumb{ background: #e5e7eb; border-radius: 999px; }

.promo-item{
  position: relative; background: #fff; border: 1px solid var(--color-border);
  border-radius: 12px; padding: .7rem .65rem .6rem; scroll-snap-align: start;
  transition: transform .2s ease, box-shadow .2s ease, border-color .2s ease;
  will-change: transform; min-height: 282px;
}
.promo-item:hover{ transform: translateY(-3px); box-shadow: var(--shadow-md); border-color: rgba(214,27,31,.28); }
.promo-badge{
  position: absolute; top: 8px; left: 8px; background: var(--red-3); color: #fff;
  font-weight: 800; font-size: .82rem; padding: .22rem .5rem; border-radius: 8px; z-index: 3;
}
.promo-item .thumb{
  display: flex; align-items: center; justify-content: center;
  text-align: center; padding: 12px 6px 8px; border-bottom: 1px dashed var(--color-border);
  min-height: 176px;
}
.promo-item .thumb img{ height: 150px; max-width: 100%; object-fit: contain; }
.promo-item .title{
  font-family: var(--font-heading); font-weight: 800; font-size: .98rem; line-height: 1.35; margin: .5rem 0 .25rem;
}
.promo-item .title a{ color: var(--color-heading); }
.promo-item .title a:hover{ color: var(--red); }
.promo-item .prices{ display: flex; align-items: center; gap: .5rem; }
.promo-item .prices .price{ color: var(--red); font-weight: 800; }
.promo-item .prices .old{ color: #6B7280; text-decoration: line-through; font-size: .9rem; }
.promo-item .meta{
  display: flex; align-items: center; justify-content: space-between; margin-top: .35rem; font-size: .9rem;
}
.promo-item .meta .rating{ color: #f59e0b; font-weight: 700; }
.promo-item .meta .wish{ color: #6b7280; }
.promo-item .meta .wish:hover{ color: #111; }

/* =========================================================
  10) FOOTER
  ========================================================= */
.cps-footer{ background: #1f1f1f; color: #d0d0d0; padding-top: 2rem; }
.cps-footer h6{ color: #fff; font-weight: 700; margin-bottom: .75rem; }
.cps-footer a{ color: #ccc; transition: color .2s ease; }
.cps-footer a:hover{ color: #fff; }
.cps-footer .btn-warning{ background-color: #facc15; border: none; }
.cps-footer .btn-warning:hover{ background-color: #eab308; }
.cps-footer hr{ border-color: rgba(255,255,255,.1); }
.cps-footer .small a{ color: #aaa; }

/* =========================================================
  11) UTILITIES
  ========================================================= */
.reveal{ opacity: 0; transform: translateY(20px); transition: opacity .6s ease-out, transform .6s ease-out; }
.reveal.show{ opacity: 1; transform: translateY(0); }

.to-top{
  position: fixed; right: 18px; bottom: 18px; width: 42px; height: 42px; border-radius: 50%;
  border: none; cursor: pointer; background: rgba(0,0,0,.55); color: #fff; display: none; z-index: 1500;
}

.see-more { display: flex; justify-content: center; }
.btn-see-more{
  border-radius: 999px; font-weight: 800; padding: .55rem 1rem;
}
.btn-see-more i { vertical-align: -1px; }

/* =========================================================
  12) RESPONSIVE (nhẹ, không ép mobile mega-menu)
  ========================================================= */
@media (max-width: 991.98px){
  .cps-search{ min-width: 120px; }
}
@media (max-width: 767.98px){
  .section{ padding: 56px 0; }
  .cps-card-thumb img{ height: 180px; }
}
@media (prefers-reduced-motion: reduce){
  *{ animation-duration:.001ms !important; animation-iteration-count:1 !important; transition-duration:.001ms !important; scroll-behavior:auto !important; }
}